function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var t={},a=[];function n(e){if(t[e])return t[e];var n=new Image;n.onload=function(){t[e]=n,r()&&a.forEach(function(e){e()})},t[e]=!1,n.src=e}function r(){var e=!0;for(var n in t)t.hasOwnProperty(n)&&!t[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return t[e]},onReady:function(e){a.push(e)},isReady:r}}();var level=document.getElementById("score"),lives=document.getElementById("lives"),Sun=function e(n,t){_classCallCheck(this,e),this.x=n,this.y=t},Enemy=function(){function i(e,n,t,a){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,i),this.x=e,this.y=n,this.direction=t,this.style=a,this.speedY=r,this.speed=Math.floor(3*(Math.random()+1))}return _createClass(i,[{key:"resetGame",value:function(){lives.firstElementChild.innerHTML=3,level.firstElementChild.innerHTML=0,player.numLives=3,player.numLevel=0,allEnemies[0].y=100,allEnemies[0].speedY=0,allEnemies[1].y=210;var e=!(allEnemies[1].speedY=0),n=!1,t=void 0;try{for(var a,r=allEnemies[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){a.value.speed=Math.floor(3*(Math.random()+1))}}catch(e){n=!0,t=e}finally{try{e||null==r.return||r.return()}finally{if(n)throw t}}}},{key:"move",value:function(){this.x+=this.speed,this.y+=this.speedY,(810<=this.x||this.x<=0)&&(this.speed=-this.speed),(330<=this.y||this.y<=10)&&(this.speedY=-this.speedY),800<=this.x?this.direction="rtl":this.x<=5&&(this.direction="ltr")}},{key:"collisionCheck",value:function(){var e=Math.abs(this.x-player.x)<=70,n=Math.abs(this.y-player.y)<=70;e&&n&&this.collision()}},{key:"collision",value:function(){player.x=450;var e=!0,n=!(player.y=430),t=void 0;try{for(var a,r=allEnemies[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;1<Math.abs(i.speed)&&(i.speed<0?i.speed+=1:--i.speed)}}catch(e){n=!0,t=e}finally{try{e||null==r.return||r.return()}finally{if(n)throw t}}player.numLevel<=1&&(allEnemies[0].speedY=0,allEnemies[0].y=100,allEnemies[1].speedY=0,allEnemies[1].y=100),1<=player.numLives?(player.numLives--,lives.firstElementChild.innerHTML=player.numLives,0<player.numLevel?player.numLevel--:player.numLevel=0,level.firstElementChild.innerHTML=player.numLevel):(this.resetGame(),Swal.fire("GAME OVER !!!","Please press OK to play again."))}},{key:"update",value:function(){this.move(),this.collisionCheck()}}]),i}(),Player=function(){function t(e,n){_classCallCheck(this,t),this.x=e,this.y=n,this.speedx=20,this.speedy=20,this.numLives=3,this.numLevel=0}return _createClass(t,[{key:"reachedSunCheck",value:function(){var e=Math.abs(this.x-sun.x)<=80,n=Math.abs(this.y-sun.y)<=80;e&&n&&this.score()}},{key:"score",value:function(){this.x=450,this.y=430,this.numLevel++,level.firstElementChild.innerHTML=this.numLevel,5<this.numLevel?(allEnemies[0].speedY=5,allEnemies[1].speedY=2):1<this.numLevel&&(allEnemies[0].speedY=1);var e=!0,n=!1,t=void 0;try{for(var a,r=allEnemies[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;i.speed<0?i.speed+=-1:i.speed+=1}}catch(e){n=!0,t=e}finally{try{e||null==r.return||r.return()}finally{if(n)throw t}}}},{key:"update",value:function(){this.reachedSunCheck()}},{key:"handleInput",value:function(e){"up"===e&&10<=this.y?this.y+=-this.speedy:"down"===e&&this.y<=420?this.y+=this.speedy:"left"===e&&0<=this.x?this.x+=-this.speedx:"right"===e&&this.x<=790&&(this.x+=this.speedx)}}]),t}(),sun=new Sun(450,0),allEnemies=[new Enemy(200,100,"ltr","enemy1"),new Enemy(800,210,"rtl","enemy2"),new Enemy(0,320,"ltr","enemy3")],player=new Player(450,430);document.addEventListener("keydown",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){e.document;var n,t=e.window,a=document.getElementById("canvas"),r=a.getContext("2d");function i(){var e=Date.now();(function(n){allEnemies.forEach(function(e){e.update(n)}),player.update()})((e-n)/1e3),r.clearRect(0,0,a.width,a.height),r.drawImage(Resources.get("images/background.png"),0,0),function(){r.drawImage(Resources.get("images/sun.png"),sun.x,sun.y),player.tickCount++,player.tickCount>player.ticksPerFrame&&(player.tickCount=0,player.frameIndex++);player.frameIndex>=player.numberOfFrames&&(player.frameIndex=0);var e=Resources.get("images/player.png");r.drawImage(e,0,player.frameIndex*e.naturalHeight/player.numberOfFrames,e.naturalWidth,e.naturalHeight/player.numberOfFrames,player.x,player.y,e.naturalWidth,e.naturalHeight/player.numberOfFrames),allEnemies.forEach(function(e){e.tickCount++,e.tickCount>e.ticksPerFrame&&(e.tickCount=0,e.frameIndex++),e.frameIndex>=e.numberOfFrames&&(e.frameIndex=0);var n=Resources.get("images/".concat(e.style,"-").concat(e.direction,".png"));r.drawImage(n,0,e.frameIndex*n.naturalHeight/e.numberOfFrames,n.naturalWidth,n.naturalHeight/e.numberOfFrames,e.x,e.y,n.naturalWidth,n.naturalHeight/e.numberOfFrames)})}(),n=e,t.requestAnimationFrame(i)}a.width=900,a.height=534,Resources.load(["images/background.png","images/enemy1-ltr.png","images/enemy2-ltr.png","images/enemy3-ltr.png","images/enemy1-rtl.png","images/enemy2-rtl.png","images/enemy3-rtl.png","images/enemy4-rtl.png","images/enemy4-ltr.png","images/sun.png","images/player.png"]),Resources.onReady(function(){allEnemies.forEach(function(e){e.tickCount=0,e.ticksPerFrame=5,e.frameIndex=0,e.numberOfFrames=3}),player.tickCount=0,player.ticksPerFrame=5,player.frameIndex=0,player.numberOfFrames=2,n=Date.now(),i()}),e.ctx=r}(this);